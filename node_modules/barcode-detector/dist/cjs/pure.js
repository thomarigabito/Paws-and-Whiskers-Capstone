"use strict";var ze=(o,h,s)=>{if(!h.has(o))throw TypeError("Cannot "+s)};var ne=(o,h,s)=>(ze(o,h,"read from private field"),s?s.call(o):h.get(o)),Ne=(o,h,s)=>{if(h.has(o))throw TypeError("Cannot add the same private member more than once");h instanceof WeakSet?h.add(o):h.set(o,s)},Ge=(o,h,s,$)=>(ze(o,h,"write to private field"),$?$.call(o,s):h.set(o,s),s);Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const Xe=["Aztec","Codabar","Code128","Code39","Code93","DataBar","DataBarExpanded","DataMatrix","DXFilmEdge","EAN-13","EAN-8","ITF","Linear-Codes","Matrix-Codes","MaxiCode","MicroQRCode","None","PDF417","QRCode","rMQRCode","UPC-A","UPC-E"];function xa(o){return o.join("|")}function Fa(o){const h=qe(o);let s=0,$=Xe.length-1;for(;s<=$;){const g=Math.floor((s+$)/2),b=Xe[g],B=qe(b);if(B===h)return b;B<h?s=g+1:$=g-1}return"None"}function qe(o){return o.toLowerCase().replace(/_-\[\]/g,"")}function Sa(o,h){return o.Binarizer[h]}function Ma(o,h){return o.CharacterSet[h]}const ja=["Text","Binary","Mixed","GS1","ISO15434","UnknownECI"];function Ia(o){return ja[o.value]}function Ra(o,h){return o.EanAddOnSymbol[h]}function Wa(o,h){return o.TextMode[h]}const dt={formats:[],tryHarder:!0,tryRotate:!0,tryInvert:!0,tryDownscale:!0,binarizer:"LocalAverage",isPure:!1,downscaleFactor:3,downscaleThreshold:500,minLineCount:2,maxNumberOfSymbols:255,tryCode39ExtendedMode:!1,validateCode39CheckSum:!1,validateITFCheckSum:!1,returnCodabarStartEnd:!1,returnErrors:!1,eanAddOnSymbol:"Read",textMode:"Plain",characterSet:"Unknown"};function Ze(o,h){return{...h,formats:xa(h.formats),binarizer:Sa(o,h.binarizer),eanAddOnSymbol:Ra(o,h.eanAddOnSymbol),textMode:Wa(o,h.textMode),characterSet:Ma(o,h.characterSet)}}function Je(o){return{...o,format:Fa(o.format),eccLevel:o.eccLevel,contentType:Ia(o.contentType)}}const ka={locateFile:(o,h)=>{const s=o.match(/_(.+?)\.wasm$/);return s?`https://fastly.jsdelivr.net/npm/zxing-wasm@1.2.3/dist/${s[1]}/${o}`:h+o}};let ae=new WeakMap;function oe(o,h){var s;const $=ae.get(o);if($!=null&&$.modulePromise&&(h===void 0||Object.is(h,$.moduleOverrides)))return $.modulePromise;const g=(s=h!=null?h:$==null?void 0:$.moduleOverrides)!=null?s:ka,b=o({...g});return ae.set(o,{moduleOverrides:g,modulePromise:b}),b}function Ha(o,h){ae.set(o,{moduleOverrides:h})}async function Ba(o,h,s=dt){const $={...dt,...s},g=await oe(o),{size:b}=h,B=new Uint8Array(await h.arrayBuffer()),V=g._malloc(b);g.HEAPU8.set(B,V);const Y=g.readBarcodesFromImage(V,b,Ze(g,$));g._free(V);const k=[];for(let S=0;S<Y.size();++S)k.push(Je(Y.get(S)));return k}async function Ua(o,h,s=dt){const $={...dt,...s},g=await oe(o),{data:b,width:B,height:V,data:{byteLength:Y}}=h,k=g._malloc(Y);g.HEAPU8.set(b,k);const S=g.readBarcodesFromPixmap(k,B,V,Ze(g,$));g._free(k);const K=[];for(let z=0;z<S.size();++z)K.push(Je(S.get(z)));return K}({...dt,formats:[...dt.formats]});var Wt=(()=>{var o=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return function(h={}){var s=h,$,g;s.ready=new Promise((t,e)=>{$=t,g=e});var b=Object.assign({},s),B="./this.program",V=typeof window=="object",Y=typeof Bun<"u",k=typeof importScripts=="function";typeof process=="object"&&typeof process.versions=="object"&&process.versions.node;var S="";function K(t){return s.locateFile?s.locateFile(t,S):S+t}var z;(V||k||Y)&&(k?S=self.location.href:typeof document<"u"&&document.currentScript&&(S=document.currentScript.src),o&&(S=o),S.indexOf("blob:")!==0?S=S.substr(0,S.replace(/[?#].*/,"").lastIndexOf("/")+1):S="",k&&(z=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)})),s.print||console.log.bind(console);var q=s.printErr||console.error.bind(console);Object.assign(s,b),b=null,s.arguments&&s.arguments,s.thisProgram&&(B=s.thisProgram),s.quit&&s.quit;var tt;s.wasmBinary&&(tt=s.wasmBinary),typeof WebAssembly!="object"&&Ct("no native wasm support detected");var et,bt=!1,U,H,ot,ft,W,T,ie,se;function ue(){var t=et.buffer;s.HEAP8=U=new Int8Array(t),s.HEAP16=ot=new Int16Array(t),s.HEAPU8=H=new Uint8Array(t),s.HEAPU16=ft=new Uint16Array(t),s.HEAP32=W=new Int32Array(t),s.HEAPU32=T=new Uint32Array(t),s.HEAPF32=ie=new Float32Array(t),s.HEAPF64=se=new Float64Array(t)}var ce=[],le=[],de=[];function cr(){if(s.preRun)for(typeof s.preRun=="function"&&(s.preRun=[s.preRun]);s.preRun.length;)fr(s.preRun.shift());kt(ce)}function lr(){kt(le)}function dr(){if(s.postRun)for(typeof s.postRun=="function"&&(s.postRun=[s.postRun]);s.postRun.length;)pr(s.postRun.shift());kt(de)}function fr(t){ce.unshift(t)}function hr(t){le.unshift(t)}function pr(t){de.unshift(t)}var rt=0,ht=null;function mr(t){var e;rt++,(e=s.monitorRunDependencies)===null||e===void 0||e.call(s,rt)}function yr(t){var e;if(rt--,(e=s.monitorRunDependencies)===null||e===void 0||e.call(s,rt),rt==0&&ht){var r=ht;ht=null,r()}}function Ct(t){var e;(e=s.onAbort)===null||e===void 0||e.call(s,t),t="Aborted("+t+")",q(t),bt=!0,t+=". Build with -sASSERTIONS for more info.";var r=new WebAssembly.RuntimeError(t);throw g(r),r}var vr="data:application/octet-stream;base64,",fe=t=>t.startsWith(vr),it;it="zxing_reader.wasm",fe(it)||(it=K(it));function he(t){if(t==it&&tt)return new Uint8Array(tt);if(z)return z(t);throw"both async and sync fetching of the wasm failed"}function gr(t){return!tt&&(V||k||Y)&&typeof fetch=="function"?fetch(t,{credentials:"same-origin"}).then(e=>{if(!e.ok)throw"failed to load wasm binary file at '"+t+"'";return e.arrayBuffer()}).catch(()=>he(t)):Promise.resolve().then(()=>he(t))}function pe(t,e,r){return gr(t).then(n=>WebAssembly.instantiate(n,e)).then(n=>n).then(r,n=>{q(`failed to asynchronously prepare wasm: ${n}`),Ct(n)})}function wr(t,e,r,n){return!t&&typeof WebAssembly.instantiateStreaming=="function"&&!fe(e)&&typeof fetch=="function"?fetch(e,{credentials:"same-origin"}).then(a=>{var i=WebAssembly.instantiateStreaming(a,r);return i.then(n,function(u){return q(`wasm streaming compile failed: ${u}`),q("falling back to ArrayBuffer instantiation"),pe(e,r,n)})}):pe(e,r,n)}function $r(){var t={a:ua};function e(n,a){return M=n.exports,et=M.ia,ue(),Te=M.ma,hr(M.ja),yr(),M}mr();function r(n){e(n.instance)}if(s.instantiateWasm)try{return s.instantiateWasm(t,e)}catch(n){q(`Module.instantiateWasm callback failed with error: ${n}`),g(n)}return wr(tt,it,t,r).catch(g),{}}var kt=t=>{for(;t.length>0;)t.shift()(s)};s.noExitRuntime;var _t=[],Tt=0,br=t=>{var e=new Ht(t);return e.get_caught()||(e.set_caught(!0),Tt--),e.set_rethrown(!1),_t.push(e),ke(e.excPtr),e.get_exception_ptr()},Q=0,Cr=()=>{P(0,0);var t=_t.pop();We(t.excPtr),Q=0};function Ht(t){this.excPtr=t,this.ptr=t-24,this.set_type=function(e){T[this.ptr+4>>2]=e},this.get_type=function(){return T[this.ptr+4>>2]},this.set_destructor=function(e){T[this.ptr+8>>2]=e},this.get_destructor=function(){return T[this.ptr+8>>2]},this.set_caught=function(e){e=e?1:0,U[this.ptr+12>>0]=e},this.get_caught=function(){return U[this.ptr+12>>0]!=0},this.set_rethrown=function(e){e=e?1:0,U[this.ptr+13>>0]=e},this.get_rethrown=function(){return U[this.ptr+13>>0]!=0},this.init=function(e,r){this.set_adjusted_ptr(0),this.set_type(e),this.set_destructor(r)},this.set_adjusted_ptr=function(e){T[this.ptr+16>>2]=e},this.get_adjusted_ptr=function(){return T[this.ptr+16>>2]},this.get_exception_ptr=function(){var e=Be(this.get_type());if(e)return T[this.excPtr>>2];var r=this.get_adjusted_ptr();return r!==0?r:this.excPtr}}var _r=t=>{throw Q||(Q=t),Q},Bt=t=>{var e=Q;if(!e)return $t(0),0;var r=new Ht(e);r.set_adjusted_ptr(e);var n=r.get_type();if(!n)return $t(0),e;for(var a in t){var i=t[a];if(i===0||i===n)break;var u=r.ptr+16;if(He(i,n,u))return $t(i),e}return $t(n),e},Tr=()=>Bt([]),Pr=t=>Bt([t]),Er=(t,e)=>Bt([t,e]),Ar=()=>{var t=_t.pop();t||Ct("no exception to throw");var e=t.excPtr;throw t.get_rethrown()||(_t.push(t),t.set_rethrown(!0),t.set_caught(!1),Tt++),Q=e,Q},Or=(t,e,r)=>{var n=new Ht(t);throw n.init(e,r),Q=t,Tt++,Q},Dr=()=>Tt,Pt={},Ut=t=>{for(;t.length;){var e=t.pop(),r=t.pop();r(e)}};function Vt(t){return this.fromWireType(W[t>>2])}var st={},nt={},Et={},me,At=t=>{throw new me(t)},at=(t,e,r)=>{t.forEach(function(c){Et[c]=e});function n(c){var l=r(c);l.length!==t.length&&At("Mismatched type converter count");for(var f=0;f<t.length;++f)G(t[f],l[f])}var a=new Array(e.length),i=[],u=0;e.forEach((c,l)=>{nt.hasOwnProperty(c)?a[l]=nt[c]:(i.push(c),st.hasOwnProperty(c)||(st[c]=[]),st[c].push(()=>{a[l]=nt[c],++u,u===i.length&&n(a)}))}),i.length===0&&n(a)},xr=t=>{var e=Pt[t];delete Pt[t];var r=e.rawConstructor,n=e.rawDestructor,a=e.fields,i=a.map(u=>u.getterReturnType).concat(a.map(u=>u.setterArgumentType));at([t],i,u=>{var c={};return a.forEach((l,f)=>{var p=l.fieldName,y=u[f],v=l.getter,w=l.getterContext,E=u[f+a.length],x=l.setter,_=l.setterContext;c[p]={read:R=>y.fromWireType(v(w,R)),write:(R,d)=>{var m=[];x(_,R,E.toWireType(m,d)),Ut(m)}}}),[{name:e.name,fromWireType:l=>{var f={};for(var p in c)f[p]=c[p].read(l);return n(l),f},toWireType:(l,f)=>{for(var p in c)if(!(p in f))throw new TypeError(`Missing field: "${p}"`);var y=r();for(p in c)c[p].write(y,f[p]);return l!==null&&l.push(n,y),y},argPackAdvance:X,readValueFromPointer:Vt,destructorFunction:n}]})},Fr=(t,e,r,n,a)=>{},Sr=()=>{for(var t=new Array(256),e=0;e<256;++e)t[e]=String.fromCharCode(e);ye=t},ye,I=t=>{for(var e="",r=t;H[r];)e+=ye[H[r++]];return e},ut,C=t=>{throw new ut(t)};function Mr(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};var n=e.name;if(t||C(`type "${n}" must have a positive integer typeid pointer`),nt.hasOwnProperty(t)){if(r.ignoreDuplicateRegistrations)return;C(`Cannot register type '${n}' twice`)}if(nt[t]=e,delete Et[t],st.hasOwnProperty(t)){var a=st[t];delete st[t],a.forEach(i=>i())}}function G(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!("argPackAdvance"in e))throw new TypeError("registerType registeredInstance requires argPackAdvance");return Mr(t,e,r)}var X=8,jr=(t,e,r,n)=>{e=I(e),G(t,{name:e,fromWireType:function(a){return!!a},toWireType:function(a,i){return i?r:n},argPackAdvance:X,readValueFromPointer:function(a){return this.fromWireType(H[a])},destructorFunction:null})},Ir=t=>({count:t.count,deleteScheduled:t.deleteScheduled,preservePointerOnDelete:t.preservePointerOnDelete,ptr:t.ptr,ptrType:t.ptrType,smartPtr:t.smartPtr,smartPtrType:t.smartPtrType}),Lt=t=>{function e(r){return r.$$.ptrType.registeredClass.name}C(e(t)+" instance already deleted")},Yt=!1,ve=t=>{},Rr=t=>{t.smartPtr?t.smartPtrType.rawDestructor(t.smartPtr):t.ptrType.registeredClass.rawDestructor(t.ptr)},ge=t=>{t.count.value-=1;var e=t.count.value===0;e&&Rr(t)},we=(t,e,r)=>{if(e===r)return t;if(r.baseClass===void 0)return null;var n=we(t,e,r.baseClass);return n===null?null:r.downcast(n)},$e={},Wr=()=>Object.keys(yt).length,kr=()=>{var t=[];for(var e in yt)yt.hasOwnProperty(e)&&t.push(yt[e]);return t},pt=[],zt=()=>{for(;pt.length;){var t=pt.pop();t.$$.deleteScheduled=!1,t.delete()}},mt,Hr=t=>{mt=t,pt.length&&mt&&mt(zt)},Br=()=>{s.getInheritedInstanceCount=Wr,s.getLiveInheritedInstances=kr,s.flushPendingDeletes=zt,s.setDelayFunction=Hr},yt={},Ur=(t,e)=>{for(e===void 0&&C("ptr should not be undefined");t.baseClass;)e=t.upcast(e),t=t.baseClass;return e},Vr=(t,e)=>(e=Ur(t,e),yt[e]),Ot=(t,e)=>{(!e.ptrType||!e.ptr)&&At("makeClassHandle requires ptr and ptrType");var r=!!e.smartPtrType,n=!!e.smartPtr;return r!==n&&At("Both smartPtrType and smartPtr must be specified"),e.count={value:1},vt(Object.create(t,{$$:{value:e,writable:!0}}))};function Lr(t){var e=this.getPointee(t);if(!e)return this.destructor(t),null;var r=Vr(this.registeredClass,e);if(r!==void 0){if(r.$$.count.value===0)return r.$$.ptr=e,r.$$.smartPtr=t,r.clone();var n=r.clone();return this.destructor(t),n}function a(){return this.isSmartPointer?Ot(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:e,smartPtrType:this,smartPtr:t}):Ot(this.registeredClass.instancePrototype,{ptrType:this,ptr:t})}var i=this.registeredClass.getActualType(e),u=$e[i];if(!u)return a.call(this);var c;this.isConst?c=u.constPointerType:c=u.pointerType;var l=we(e,this.registeredClass,c.registeredClass);return l===null?a.call(this):this.isSmartPointer?Ot(c.registeredClass.instancePrototype,{ptrType:c,ptr:l,smartPtrType:this,smartPtr:t}):Ot(c.registeredClass.instancePrototype,{ptrType:c,ptr:l})}var vt=t=>typeof FinalizationRegistry>"u"?(vt=e=>e,t):(Yt=new FinalizationRegistry(e=>{ge(e.$$)}),vt=e=>{var r=e.$$,n=!!r.smartPtr;if(n){var a={$$:r};Yt.register(e,a,e)}return e},ve=e=>Yt.unregister(e),vt(t)),Yr=()=>{Object.assign(Dt.prototype,{isAliasOf(t){if(!(this instanceof Dt)||!(t instanceof Dt))return!1;var e=this.$$.ptrType.registeredClass,r=this.$$.ptr;t.$$=t.$$;for(var n=t.$$.ptrType.registeredClass,a=t.$$.ptr;e.baseClass;)r=e.upcast(r),e=e.baseClass;for(;n.baseClass;)a=n.upcast(a),n=n.baseClass;return e===n&&r===a},clone(){if(this.$$.ptr||Lt(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var t=vt(Object.create(Object.getPrototypeOf(this),{$$:{value:Ir(this.$$)}}));return t.$$.count.value+=1,t.$$.deleteScheduled=!1,t},delete(){this.$$.ptr||Lt(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&C("Object already scheduled for deletion"),ve(this),ge(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)},isDeleted(){return!this.$$.ptr},deleteLater(){return this.$$.ptr||Lt(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&C("Object already scheduled for deletion"),pt.push(this),pt.length===1&&mt&&mt(zt),this.$$.deleteScheduled=!0,this}})};function Dt(){}var gt=(t,e)=>Object.defineProperty(e,"name",{value:t}),be=(t,e,r)=>{if(t[e].overloadTable===void 0){var n=t[e];t[e]=function(){return t[e].overloadTable.hasOwnProperty(arguments.length)||C(`Function '${r}' called with an invalid number of arguments (${arguments.length}) - expects one of (${t[e].overloadTable})!`),t[e].overloadTable[arguments.length].apply(this,arguments)},t[e].overloadTable=[],t[e].overloadTable[n.argCount]=n}},Nt=(t,e,r)=>{s.hasOwnProperty(t)?((r===void 0||s[t].overloadTable!==void 0&&s[t].overloadTable[r]!==void 0)&&C(`Cannot register public name '${t}' twice`),be(s,t,t),s.hasOwnProperty(r)&&C(`Cannot register multiple overloads of a function with the same number of arguments (${r})!`),s[t].overloadTable[r]=e):(s[t]=e,r!==void 0&&(s[t].numArguments=r))},zr=48,Nr=57,Gr=t=>{if(t===void 0)return"_unknown";t=t.replace(/[^a-zA-Z0-9_]/g,"$");var e=t.charCodeAt(0);return e>=zr&&e<=Nr?`_${t}`:t};function Xr(t,e,r,n,a,i,u,c){this.name=t,this.constructor=e,this.instancePrototype=r,this.rawDestructor=n,this.baseClass=a,this.getActualType=i,this.upcast=u,this.downcast=c,this.pureVirtualFunctions=[]}var Gt=(t,e,r)=>{for(;e!==r;)e.upcast||C(`Expected null or instance of ${r.name}, got an instance of ${e.name}`),t=e.upcast(t),e=e.baseClass;return t};function qr(t,e){if(e===null)return this.isReference&&C(`null is not a valid ${this.name}`),0;e.$$||C(`Cannot pass "${Jt(e)}" as a ${this.name}`),e.$$.ptr||C(`Cannot pass deleted object as a pointer of type ${this.name}`);var r=e.$$.ptrType.registeredClass,n=Gt(e.$$.ptr,r,this.registeredClass);return n}function Qr(t,e){var r;if(e===null)return this.isReference&&C(`null is not a valid ${this.name}`),this.isSmartPointer?(r=this.rawConstructor(),t!==null&&t.push(this.rawDestructor,r),r):0;(!e||!e.$$)&&C(`Cannot pass "${Jt(e)}" as a ${this.name}`),e.$$.ptr||C(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.isConst&&e.$$.ptrType.isConst&&C(`Cannot convert argument of type ${e.$$.smartPtrType?e.$$.smartPtrType.name:e.$$.ptrType.name} to parameter type ${this.name}`);var n=e.$$.ptrType.registeredClass;if(r=Gt(e.$$.ptr,n,this.registeredClass),this.isSmartPointer)switch(e.$$.smartPtr===void 0&&C("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:e.$$.smartPtrType===this?r=e.$$.smartPtr:C(`Cannot convert argument of type ${e.$$.smartPtrType?e.$$.smartPtrType.name:e.$$.ptrType.name} to parameter type ${this.name}`);break;case 1:r=e.$$.smartPtr;break;case 2:if(e.$$.smartPtrType===this)r=e.$$.smartPtr;else{var a=e.clone();r=this.rawShare(r,Z.toHandle(()=>a.delete())),t!==null&&t.push(this.rawDestructor,r)}break;default:C("Unsupporting sharing policy")}return r}function Zr(t,e){if(e===null)return this.isReference&&C(`null is not a valid ${this.name}`),0;e.$$||C(`Cannot pass "${Jt(e)}" as a ${this.name}`),e.$$.ptr||C(`Cannot pass deleted object as a pointer of type ${this.name}`),e.$$.ptrType.isConst&&C(`Cannot convert argument of type ${e.$$.ptrType.name} to parameter type ${this.name}`);var r=e.$$.ptrType.registeredClass,n=Gt(e.$$.ptr,r,this.registeredClass);return n}function Ce(t){return this.fromWireType(T[t>>2])}var Jr=()=>{Object.assign(xt.prototype,{getPointee(t){return this.rawGetPointee&&(t=this.rawGetPointee(t)),t},destructor(t){var e;(e=this.rawDestructor)===null||e===void 0||e.call(this,t)},argPackAdvance:X,readValueFromPointer:Ce,deleteObject(t){t!==null&&t.delete()},fromWireType:Lr})};function xt(t,e,r,n,a,i,u,c,l,f,p){this.name=t,this.registeredClass=e,this.isReference=r,this.isConst=n,this.isSmartPointer=a,this.pointeeType=i,this.sharingPolicy=u,this.rawGetPointee=c,this.rawConstructor=l,this.rawShare=f,this.rawDestructor=p,!a&&e.baseClass===void 0?n?(this.toWireType=qr,this.destructorFunction=null):(this.toWireType=Zr,this.destructorFunction=null):this.toWireType=Qr}var _e=(t,e,r)=>{s.hasOwnProperty(t)||At("Replacing nonexistant public symbol"),s[t].overloadTable!==void 0&&r!==void 0?s[t].overloadTable[r]=e:(s[t]=e,s[t].argCount=r)},Kr=(t,e,r)=>{var n=s["dynCall_"+t];return r&&r.length?n.apply(null,[e].concat(r)):n.call(null,e)},Ft=[],Te,A=t=>{var e=Ft[t];return e||(t>=Ft.length&&(Ft.length=t+1),Ft[t]=e=Te.get(t)),e},tn=(t,e,r)=>{if(t.includes("j"))return Kr(t,e,r);var n=A(e).apply(null,r);return n},en=(t,e)=>{var r=[];return function(){return r.length=0,Object.assign(r,arguments),tn(t,e,r)}},N=(t,e)=>{t=I(t);function r(){return t.includes("j")?en(t,e):A(e)}var n=r();return typeof n!="function"&&C(`unknown function pointer with signature ${t}: ${e}`),n},rn=(t,e)=>{var r=gt(e,function(n){this.name=e,this.message=n;var a=new Error(n).stack;a!==void 0&&(this.stack=this.toString()+`
`+a.replace(/^Error(:[^\n]*)?\n/,""))});return r.prototype=Object.create(t.prototype),r.prototype.constructor=r,r.prototype.toString=function(){return this.message===void 0?this.name:`${this.name}: ${this.message}`},r},Pe,Ee=t=>{var e=Re(t),r=I(e);return J(e),r},St=(t,e)=>{var r=[],n={};function a(i){if(!n[i]&&!nt[i]){if(Et[i]){Et[i].forEach(a);return}r.push(i),n[i]=!0}}throw e.forEach(a),new Pe(`${t}: `+r.map(Ee).join([", "]))},nn=(t,e,r,n,a,i,u,c,l,f,p,y,v)=>{p=I(p),i=N(a,i),c&&(c=N(u,c)),f&&(f=N(l,f)),v=N(y,v);var w=Gr(p);Nt(w,function(){St(`Cannot construct ${p} due to unbound types`,[n])}),at([t,e,r],n?[n]:[],function(E){E=E[0];var x,_;n?(x=E.registeredClass,_=x.instancePrototype):_=Dt.prototype;var R=gt(p,function(){if(Object.getPrototypeOf(this)!==d)throw new ut("Use 'new' to construct "+p);if(m.constructor_body===void 0)throw new ut(p+" has no accessible constructor");var Ye=m.constructor_body[arguments.length];if(Ye===void 0)throw new ut(`Tried to invoke ctor of ${p} with invalid number of parameters (${arguments.length}) - expected (${Object.keys(m.constructor_body).toString()}) parameters instead!`);return Ye.apply(this,arguments)}),d=Object.create(_,{constructor:{value:R}});R.prototype=d;var m=new Xr(p,R,d,v,x,i,c,f);if(m.baseClass){var F,j;(j=(F=m.baseClass).__derivedClasses)!==null&&j!==void 0||(F.__derivedClasses=[]),m.baseClass.__derivedClasses.push(m)}var ct=new xt(p,m,!0,!1,!1),It=new xt(p+"*",m,!1,!1,!1),Le=new xt(p+" const*",m,!1,!0,!1);return $e[t]={pointerType:It,constPointerType:Le},_e(w,R),[ct,It,Le]})},Xt=(t,e)=>{for(var r=[],n=0;n<t;n++)r.push(T[e+n*4>>2]);return r};function an(t){for(var e=1;e<t.length;++e)if(t[e]!==null&&t[e].destructorFunction===void 0)return!0;return!1}function qt(t,e,r,n,a,i){var u=e.length;u<2&&C("argTypes array size mismatch! Must at least get return value and 'this' types!");var c=e[1]!==null&&r!==null,l=an(e),f=e[0].name!=="void",p=u-2,y=new Array(p),v=[],w=[],E=function(){arguments.length!==p&&C(`function ${t} called with ${arguments.length} arguments, expected ${p}`),w.length=0;var x;v.length=c?2:1,v[0]=a,c&&(x=e[1].toWireType(w,this),v[1]=x);for(var _=0;_<p;++_)y[_]=e[_+2].toWireType(w,arguments[_]),v.push(y[_]);var R=n.apply(null,v);function d(m){if(l)Ut(w);else for(var F=c?1:2;F<e.length;F++){var j=F===1?x:y[F-2];e[F].destructorFunction!==null&&e[F].destructorFunction(j)}if(f)return e[0].fromWireType(m)}return d(R)};return gt(t,E)}var on=(t,e,r,n,a,i)=>{var u=Xt(e,r);a=N(n,a),at([],[t],function(c){c=c[0];var l=`constructor ${c.name}`;if(c.registeredClass.constructor_body===void 0&&(c.registeredClass.constructor_body=[]),c.registeredClass.constructor_body[e-1]!==void 0)throw new ut(`Cannot register multiple constructors with identical number of parameters (${e-1}) for class '${c.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return c.registeredClass.constructor_body[e-1]=()=>{St(`Cannot construct ${c.name} due to unbound types`,u)},at([],u,f=>(f.splice(1,0,null),c.registeredClass.constructor_body[e-1]=qt(l,f,null,a,i),[])),[]})},Ae=t=>{t=t.trim();const e=t.indexOf("(");return e!==-1?t.substr(0,e):t},sn=(t,e,r,n,a,i,u,c,l)=>{var f=Xt(r,n);e=I(e),e=Ae(e),i=N(a,i),at([],[t],function(p){p=p[0];var y=`${p.name}.${e}`;e.startsWith("@@")&&(e=Symbol[e.substring(2)]),c&&p.registeredClass.pureVirtualFunctions.push(e);function v(){St(`Cannot call ${y} due to unbound types`,f)}var w=p.registeredClass.instancePrototype,E=w[e];return E===void 0||E.overloadTable===void 0&&E.className!==p.name&&E.argCount===r-2?(v.argCount=r-2,v.className=p.name,w[e]=v):(be(w,e,y),w[e].overloadTable[r-2]=v),at([],f,function(x){var _=qt(y,x,p,i,u);return w[e].overloadTable===void 0?(_.argCount=r-2,w[e]=_):w[e].overloadTable[r-2]=_,[]}),[]})};function un(){Object.assign(Oe.prototype,{get(t){return this.allocated[t]},has(t){return this.allocated[t]!==void 0},allocate(t){var e=this.freelist.pop()||this.allocated.length;return this.allocated[e]=t,e},free(t){this.allocated[t]=void 0,this.freelist.push(t)}})}function Oe(){this.allocated=[void 0],this.freelist=[]}var L=new Oe,Qt=t=>{t>=L.reserved&&--L.get(t).refcount===0&&L.free(t)},cn=()=>{for(var t=0,e=L.reserved;e<L.allocated.length;++e)L.allocated[e]!==void 0&&++t;return t},ln=()=>{L.allocated.push({value:void 0},{value:null},{value:!0},{value:!1}),L.reserved=L.allocated.length,s.count_emval_handles=cn},Z={toValue:t=>(t||C("Cannot use deleted val. handle = "+t),L.get(t).value),toHandle:t=>{switch(t){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:return L.allocate({refcount:1,value:t})}}},dn=(t,e)=>{e=I(e),G(t,{name:e,fromWireType:r=>{var n=Z.toValue(r);return Qt(r),n},toWireType:(r,n)=>Z.toHandle(n),argPackAdvance:X,readValueFromPointer:Vt,destructorFunction:null})},fn=(t,e,r)=>{switch(e){case 1:return r?function(n){return this.fromWireType(U[n>>0])}:function(n){return this.fromWireType(H[n>>0])};case 2:return r?function(n){return this.fromWireType(ot[n>>1])}:function(n){return this.fromWireType(ft[n>>1])};case 4:return r?function(n){return this.fromWireType(W[n>>2])}:function(n){return this.fromWireType(T[n>>2])};default:throw new TypeError(`invalid integer width (${e}): ${t}`)}},hn=(t,e,r,n)=>{e=I(e);function a(){}a.values={},G(t,{name:e,constructor:a,fromWireType:function(i){return this.constructor.values[i]},toWireType:(i,u)=>u.value,argPackAdvance:X,readValueFromPointer:fn(e,r,n),destructorFunction:null}),Nt(e,a)},Zt=(t,e)=>{var r=nt[t];return r===void 0&&C(e+" has unknown type "+Ee(t)),r},pn=(t,e,r)=>{var n=Zt(t,"enum");e=I(e);var a=n.constructor,i=Object.create(n.constructor.prototype,{value:{value:r},constructor:{value:gt(`${n.name}_${e}`,function(){})}});a.values[r]=i,a[e]=i},Jt=t=>{if(t===null)return"null";var e=typeof t;return e==="object"||e==="array"||e==="function"?t.toString():""+t},mn=(t,e)=>{switch(e){case 4:return function(r){return this.fromWireType(ie[r>>2])};case 8:return function(r){return this.fromWireType(se[r>>3])};default:throw new TypeError(`invalid float width (${e}): ${t}`)}},yn=(t,e,r)=>{e=I(e),G(t,{name:e,fromWireType:n=>n,toWireType:(n,a)=>a,argPackAdvance:X,readValueFromPointer:mn(e,r),destructorFunction:null})},vn=(t,e,r,n,a,i,u)=>{var c=Xt(e,r);t=I(t),t=Ae(t),a=N(n,a),Nt(t,function(){St(`Cannot call ${t} due to unbound types`,c)},e-1),at([],c,function(l){var f=[l[0],null].concat(l.slice(1));return _e(t,qt(t,f,null,a,i),e-1),[]})},gn=(t,e,r)=>{switch(e){case 1:return r?n=>U[n>>0]:n=>H[n>>0];case 2:return r?n=>ot[n>>1]:n=>ft[n>>1];case 4:return r?n=>W[n>>2]:n=>T[n>>2];default:throw new TypeError(`invalid integer width (${e}): ${t}`)}},wn=(t,e,r,n,a)=>{e=I(e);var i=p=>p;if(n===0){var u=32-8*r;i=p=>p<<u>>>u}var c=e.includes("unsigned"),l=(p,y)=>{},f;c?f=function(p,y){return l(y,this.name),y>>>0}:f=function(p,y){return l(y,this.name),y},G(t,{name:e,fromWireType:i,toWireType:f,argPackAdvance:X,readValueFromPointer:gn(e,r,n!==0),destructorFunction:null})},$n=(t,e,r)=>{var n=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],a=n[e];function i(u){var c=T[u>>2],l=T[u+4>>2];return new a(U.buffer,l,c)}r=I(r),G(t,{name:r,fromWireType:i,argPackAdvance:X,readValueFromPointer:i},{ignoreDuplicateRegistrations:!0})},De=(t,e,r,n)=>{if(!(n>0))return 0;for(var a=r,i=r+n-1,u=0;u<t.length;++u){var c=t.charCodeAt(u);if(c>=55296&&c<=57343){var l=t.charCodeAt(++u);c=65536+((c&1023)<<10)|l&1023}if(c<=127){if(r>=i)break;e[r++]=c}else if(c<=2047){if(r+1>=i)break;e[r++]=192|c>>6,e[r++]=128|c&63}else if(c<=65535){if(r+2>=i)break;e[r++]=224|c>>12,e[r++]=128|c>>6&63,e[r++]=128|c&63}else{if(r+3>=i)break;e[r++]=240|c>>18,e[r++]=128|c>>12&63,e[r++]=128|c>>6&63,e[r++]=128|c&63}}return e[r]=0,r-a},bn=(t,e,r)=>De(t,H,e,r),xe=t=>{for(var e=0,r=0;r<t.length;++r){var n=t.charCodeAt(r);n<=127?e++:n<=2047?e+=2:n>=55296&&n<=57343?(e+=4,++r):e+=3}return e},Fe=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,Cn=(t,e,r)=>{for(var n=e+r,a=e;t[a]&&!(a>=n);)++a;if(a-e>16&&t.buffer&&Fe)return Fe.decode(t.subarray(e,a));for(var i="";e<a;){var u=t[e++];if(!(u&128)){i+=String.fromCharCode(u);continue}var c=t[e++]&63;if((u&224)==192){i+=String.fromCharCode((u&31)<<6|c);continue}var l=t[e++]&63;if((u&240)==224?u=(u&15)<<12|c<<6|l:u=(u&7)<<18|c<<12|l<<6|t[e++]&63,u<65536)i+=String.fromCharCode(u);else{var f=u-65536;i+=String.fromCharCode(55296|f>>10,56320|f&1023)}}return i},Kt=(t,e)=>t?Cn(H,t,e):"",_n=(t,e)=>{e=I(e);var r=e==="std::string";G(t,{name:e,fromWireType(n){var a=T[n>>2],i=n+4,u;if(r)for(var c=i,l=0;l<=a;++l){var f=i+l;if(l==a||H[f]==0){var p=f-c,y=Kt(c,p);u===void 0?u=y:(u+="\0",u+=y),c=f+1}}else{for(var v=new Array(a),l=0;l<a;++l)v[l]=String.fromCharCode(H[i+l]);u=v.join("")}return J(n),u},toWireType(n,a){a instanceof ArrayBuffer&&(a=new Uint8Array(a));var i,u=typeof a=="string";u||a instanceof Uint8Array||a instanceof Uint8ClampedArray||a instanceof Int8Array||C("Cannot pass non-string to std::string"),r&&u?i=xe(a):i=a.length;var c=re(4+i+1),l=c+4;if(T[c>>2]=i,r&&u)bn(a,l,i+1);else if(u)for(var f=0;f<i;++f){var p=a.charCodeAt(f);p>255&&(J(l),C("String has UTF-16 code units that do not fit in 8 bits")),H[l+f]=p}else for(var f=0;f<i;++f)H[l+f]=a[f];return n!==null&&n.push(J,c),c},argPackAdvance:X,readValueFromPointer:Ce,destructorFunction(n){J(n)}})},Se=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,Tn=(t,e)=>{for(var r=t,n=r>>1,a=n+e/2;!(n>=a)&&ft[n];)++n;if(r=n<<1,r-t>32&&Se)return Se.decode(H.subarray(t,r));for(var i="",u=0;!(u>=e/2);++u){var c=ot[t+u*2>>1];if(c==0)break;i+=String.fromCharCode(c)}return i},Pn=(t,e,r)=>{var n;if((n=r)!==null&&n!==void 0||(r=2147483647),r<2)return 0;r-=2;for(var a=e,i=r<t.length*2?r/2:t.length,u=0;u<i;++u){var c=t.charCodeAt(u);ot[e>>1]=c,e+=2}return ot[e>>1]=0,e-a},En=t=>t.length*2,An=(t,e)=>{for(var r=0,n="";!(r>=e/4);){var a=W[t+r*4>>2];if(a==0)break;if(++r,a>=65536){var i=a-65536;n+=String.fromCharCode(55296|i>>10,56320|i&1023)}else n+=String.fromCharCode(a)}return n},On=(t,e,r)=>{var n;if((n=r)!==null&&n!==void 0||(r=2147483647),r<4)return 0;for(var a=e,i=a+r-4,u=0;u<t.length;++u){var c=t.charCodeAt(u);if(c>=55296&&c<=57343){var l=t.charCodeAt(++u);c=65536+((c&1023)<<10)|l&1023}if(W[e>>2]=c,e+=4,e+4>i)break}return W[e>>2]=0,e-a},Dn=t=>{for(var e=0,r=0;r<t.length;++r){var n=t.charCodeAt(r);n>=55296&&n<=57343&&++r,e+=4}return e},xn=(t,e,r)=>{r=I(r);var n,a,i,u,c;e===2?(n=Tn,a=Pn,u=En,i=()=>ft,c=1):e===4&&(n=An,a=On,u=Dn,i=()=>T,c=2),G(t,{name:r,fromWireType:l=>{for(var f=T[l>>2],p=i(),y,v=l+4,w=0;w<=f;++w){var E=l+4+w*e;if(w==f||p[E>>c]==0){var x=E-v,_=n(v,x);y===void 0?y=_:(y+="\0",y+=_),v=E+e}}return J(l),y},toWireType:(l,f)=>{typeof f!="string"&&C(`Cannot pass non-string to C++ string type ${r}`);var p=u(f),y=re(4+p+e);return T[y>>2]=p>>c,a(f,y+4,p+e),l!==null&&l.push(J,y),y},argPackAdvance:X,readValueFromPointer:Vt,destructorFunction(l){J(l)}})},Fn=(t,e,r,n,a,i)=>{Pt[t]={name:I(e),rawConstructor:N(r,n),rawDestructor:N(a,i),fields:[]}},Sn=(t,e,r,n,a,i,u,c,l,f)=>{Pt[t].fields.push({fieldName:I(e),getterReturnType:r,getter:N(n,a),getterContext:i,setterArgumentType:u,setter:N(c,l),setterContext:f})},Mn=(t,e)=>{e=I(e),G(t,{isVoid:!0,name:e,argPackAdvance:0,fromWireType:()=>{},toWireType:(r,n)=>{}})},te=[],jn=(t,e,r,n)=>(t=te[t],e=Z.toValue(e),t(null,e,r,n)),In={},Rn=t=>{var e=In[t];return e===void 0?I(t):e},Me=()=>{if(typeof globalThis=="object")return globalThis;function t(e){e.$$$embind_global$$$=e;var r=typeof $$$embind_global$$$=="object"&&e.$$$embind_global$$$==e;return r||delete e.$$$embind_global$$$,r}if(typeof $$$embind_global$$$=="object"||(typeof global=="object"&&t(global)?$$$embind_global$$$=global:typeof self=="object"&&t(self)&&($$$embind_global$$$=self),typeof $$$embind_global$$$=="object"))return $$$embind_global$$$;throw Error("unable to get global object.")},Wn=t=>t===0?Z.toHandle(Me()):(t=Rn(t),Z.toHandle(Me()[t])),kn=t=>{var e=te.length;return te.push(t),e},Hn=(t,e)=>{for(var r=new Array(t),n=0;n<t;++n)r[n]=Zt(T[e+n*4>>2],"parameter "+n);return r},Bn=Reflect.construct,Un=(t,e,r)=>{var n=[],a=t.toWireType(n,r);return n.length&&(T[e>>2]=Z.toHandle(n)),a},Vn=(t,e,r)=>{var n=Hn(t,e),a=n.shift();t--;var i=new Array(t),u=(l,f,p,y)=>{for(var v=0,w=0;w<t;++w)i[w]=n[w].readValueFromPointer(y+v),v+=n[w].argPackAdvance;for(var E=r===1?Bn(f,i):f.apply(l,i),w=0;w<t;++w){var x,_;(x=(_=n[w]).deleteObject)===null||x===void 0||x.call(_,i[w])}return Un(a,p,E)},c=`methodCaller<(${n.map(l=>l.name).join(", ")}) => ${a.name}>`;return kn(gt(c,u))},Ln=t=>{t>4&&(L.get(t).refcount+=1)},Yn=t=>{var e=Z.toValue(t);Ut(e),Qt(t)},zn=(t,e)=>{t=Zt(t,"_emval_take_value");var r=t.readValueFromPointer(e);return Z.toHandle(r)},Nn=()=>{Ct("")},Gn=(t,e,r)=>H.copyWithin(t,e,e+r),Xn=()=>2147483648,qn=t=>{var e=et.buffer,r=(t-e.byteLength+65535)/65536;try{return et.grow(r),ue(),1}catch{}},Qn=t=>{var e=H.length;t>>>=0;var r=Xn();if(t>r)return!1;for(var n=(l,f)=>l+(f-l%f)%f,a=1;a<=4;a*=2){var i=e*(1+.2/a);i=Math.min(i,t+100663296);var u=Math.min(r,n(Math.max(t,i),65536)),c=qn(u);if(c)return!0}return!1},ee={},Zn=()=>B||"./this.program",wt=()=>{if(!wt.strings){var t=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:t,_:Zn()};for(var r in ee)ee[r]===void 0?delete e[r]:e[r]=ee[r];var n=[];for(var r in e)n.push(`${r}=${e[r]}`);wt.strings=n}return wt.strings},Jn=(t,e)=>{for(var r=0;r<t.length;++r)U[e++>>0]=t.charCodeAt(r);U[e>>0]=0},Kn=(t,e)=>{var r=0;return wt().forEach((n,a)=>{var i=e+r;T[t+a*4>>2]=i,Jn(n,i),r+=n.length+1}),0},ta=(t,e)=>{var r=wt();T[t>>2]=r.length;var n=0;return r.forEach(a=>n+=a.length+1),T[e>>2]=n,0},ea=t=>t,Mt=t=>t%4===0&&(t%100!==0||t%400===0),ra=(t,e)=>{for(var r=0,n=0;n<=e;r+=t[n++]);return r},je=[31,29,31,30,31,30,31,31,30,31,30,31],Ie=[31,28,31,30,31,30,31,31,30,31,30,31],na=(t,e)=>{for(var r=new Date(t.getTime());e>0;){var n=Mt(r.getFullYear()),a=r.getMonth(),i=(n?je:Ie)[a];if(e>i-r.getDate())e-=i-r.getDate()+1,r.setDate(1),a<11?r.setMonth(a+1):(r.setMonth(0),r.setFullYear(r.getFullYear()+1));else return r.setDate(r.getDate()+e),r}return r};function aa(t,e,r){var n=r>0?r:xe(t)+1,a=new Array(n),i=De(t,a,0,a.length);return e&&(a.length=i),a}var oa=(t,e)=>{U.set(t,e)},ia=(t,e,r,n)=>{var a=T[n+40>>2],i={tm_sec:W[n>>2],tm_min:W[n+4>>2],tm_hour:W[n+8>>2],tm_mday:W[n+12>>2],tm_mon:W[n+16>>2],tm_year:W[n+20>>2],tm_wday:W[n+24>>2],tm_yday:W[n+28>>2],tm_isdst:W[n+32>>2],tm_gmtoff:W[n+36>>2],tm_zone:a?Kt(a):""},u=Kt(r),c={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var l in c)u=u.replace(new RegExp(l,"g"),c[l]);var f=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],p=["January","February","March","April","May","June","July","August","September","October","November","December"];function y(d,m,F){for(var j=typeof d=="number"?d.toString():d||"";j.length<m;)j=F[0]+j;return j}function v(d,m){return y(d,m,"0")}function w(d,m){function F(ct){return ct<0?-1:ct>0?1:0}var j;return(j=F(d.getFullYear()-m.getFullYear()))===0&&(j=F(d.getMonth()-m.getMonth()))===0&&(j=F(d.getDate()-m.getDate())),j}function E(d){switch(d.getDay()){case 0:return new Date(d.getFullYear()-1,11,29);case 1:return d;case 2:return new Date(d.getFullYear(),0,3);case 3:return new Date(d.getFullYear(),0,2);case 4:return new Date(d.getFullYear(),0,1);case 5:return new Date(d.getFullYear()-1,11,31);case 6:return new Date(d.getFullYear()-1,11,30)}}function x(d){var m=na(new Date(d.tm_year+1900,0,1),d.tm_yday),F=new Date(m.getFullYear(),0,4),j=new Date(m.getFullYear()+1,0,4),ct=E(F),It=E(j);return w(ct,m)<=0?w(It,m)<=0?m.getFullYear()+1:m.getFullYear():m.getFullYear()-1}var _={"%a":d=>f[d.tm_wday].substring(0,3),"%A":d=>f[d.tm_wday],"%b":d=>p[d.tm_mon].substring(0,3),"%B":d=>p[d.tm_mon],"%C":d=>{var m=d.tm_year+1900;return v(m/100|0,2)},"%d":d=>v(d.tm_mday,2),"%e":d=>y(d.tm_mday,2," "),"%g":d=>x(d).toString().substring(2),"%G":d=>x(d),"%H":d=>v(d.tm_hour,2),"%I":d=>{var m=d.tm_hour;return m==0?m=12:m>12&&(m-=12),v(m,2)},"%j":d=>v(d.tm_mday+ra(Mt(d.tm_year+1900)?je:Ie,d.tm_mon-1),3),"%m":d=>v(d.tm_mon+1,2),"%M":d=>v(d.tm_min,2),"%n":()=>`
`,"%p":d=>d.tm_hour>=0&&d.tm_hour<12?"AM":"PM","%S":d=>v(d.tm_sec,2),"%t":()=>"	","%u":d=>d.tm_wday||7,"%U":d=>{var m=d.tm_yday+7-d.tm_wday;return v(Math.floor(m/7),2)},"%V":d=>{var m=Math.floor((d.tm_yday+7-(d.tm_wday+6)%7)/7);if((d.tm_wday+371-d.tm_yday-2)%7<=2&&m++,m){if(m==53){var F=(d.tm_wday+371-d.tm_yday)%7;F!=4&&(F!=3||!Mt(d.tm_year))&&(m=1)}}else{m=52;var j=(d.tm_wday+7-d.tm_yday-1)%7;(j==4||j==5&&Mt(d.tm_year%400-1))&&m++}return v(m,2)},"%w":d=>d.tm_wday,"%W":d=>{var m=d.tm_yday+7-(d.tm_wday+6)%7;return v(Math.floor(m/7),2)},"%y":d=>(d.tm_year+1900).toString().substring(2),"%Y":d=>d.tm_year+1900,"%z":d=>{var m=d.tm_gmtoff,F=m>=0;return m=Math.abs(m)/60,m=m/60*100+m%60,(F?"+":"-")+("0000"+m).slice(-4)},"%Z":d=>d.tm_zone,"%%":()=>"%"};u=u.replace(/%%/g,"\0\0");for(var l in _)u.includes(l)&&(u=u.replace(new RegExp(l,"g"),_[l](i)));u=u.replace(/\0\0/g,"%");var R=aa(u,!1);return R.length>e?0:(oa(R,t),R.length-1)},sa=(t,e,r,n,a)=>ia(t,e,r,n);me=s.InternalError=class extends Error{constructor(t){super(t),this.name="InternalError"}},Sr(),ut=s.BindingError=class extends Error{constructor(t){super(t),this.name="BindingError"}},Yr(),Br(),Jr(),Pe=s.UnboundTypeError=rn(Error,"UnboundTypeError"),un(),ln();var ua={s:br,u:Cr,b:Tr,g:Pr,q:Er,K:Ar,f:Or,W:Dr,d:_r,da:xr,S:Fr,_:jr,ca:nn,ba:on,w:sn,Z:dn,x:hn,h:pn,N:yn,O:vn,t:wn,o:$n,M:_n,C:xn,A:Fn,ea:Sn,$:Mn,E:jn,ga:Qt,ha:Wn,L:Vn,P:Ln,Q:Yn,aa:zn,B:Nn,Y:Gn,X:Qn,U:Kn,V:ta,F:Ta,D:ha,G:_a,n:Pa,a:ca,e:ma,m:fa,k:va,I:ba,v:wa,H:Ca,z:Aa,R:Da,l:ya,j:pa,c:da,p:la,J:$a,r:Ea,i:ga,y:Oa,fa:ea,T:sa},M=$r(),J=s._free=t=>(J=s._free=M.ka)(t),re=s._malloc=t=>(re=s._malloc=M.la)(t),Re=t=>(Re=M.na)(t),P=(t,e)=>(P=M.oa)(t,e),$t=t=>($t=M.pa)(t),O=()=>(O=M.qa)(),D=t=>(D=M.ra)(t),We=t=>(We=M.sa)(t),ke=t=>(ke=M.ta)(t),He=(t,e,r)=>(He=M.ua)(t,e,r),Be=t=>(Be=M.va)(t);s.dynCall_viijii=(t,e,r,n,a,i,u)=>(s.dynCall_viijii=M.wa)(t,e,r,n,a,i,u);var Ue=s.dynCall_jiiii=(t,e,r,n,a)=>(Ue=s.dynCall_jiiii=M.xa)(t,e,r,n,a);s.dynCall_iiiiij=(t,e,r,n,a,i,u)=>(s.dynCall_iiiiij=M.ya)(t,e,r,n,a,i,u),s.dynCall_iiiiijj=(t,e,r,n,a,i,u,c,l)=>(s.dynCall_iiiiijj=M.za)(t,e,r,n,a,i,u,c,l),s.dynCall_iiiiiijj=(t,e,r,n,a,i,u,c,l,f)=>(s.dynCall_iiiiiijj=M.Aa)(t,e,r,n,a,i,u,c,l,f);function ca(t,e){var r=O();try{return A(t)(e)}catch(n){if(D(r),n!==n+0)throw n;P(1,0)}}function la(t,e,r,n){var a=O();try{A(t)(e,r,n)}catch(i){if(D(a),i!==i+0)throw i;P(1,0)}}function da(t,e,r){var n=O();try{A(t)(e,r)}catch(a){if(D(n),a!==a+0)throw a;P(1,0)}}function fa(t,e,r,n){var a=O();try{return A(t)(e,r,n)}catch(i){if(D(a),i!==i+0)throw i;P(1,0)}}function ha(t,e,r,n,a){var i=O();try{return A(t)(e,r,n,a)}catch(u){if(D(i),u!==u+0)throw u;P(1,0)}}function pa(t,e){var r=O();try{A(t)(e)}catch(n){if(D(r),n!==n+0)throw n;P(1,0)}}function ma(t,e,r){var n=O();try{return A(t)(e,r)}catch(a){if(D(n),a!==a+0)throw a;P(1,0)}}function ya(t){var e=O();try{A(t)()}catch(r){if(D(e),r!==r+0)throw r;P(1,0)}}function va(t,e,r,n,a){var i=O();try{return A(t)(e,r,n,a)}catch(u){if(D(i),u!==u+0)throw u;P(1,0)}}function ga(t,e,r,n,a,i,u,c,l,f,p){var y=O();try{A(t)(e,r,n,a,i,u,c,l,f,p)}catch(v){if(D(y),v!==v+0)throw v;P(1,0)}}function wa(t,e,r,n,a,i,u){var c=O();try{return A(t)(e,r,n,a,i,u)}catch(l){if(D(c),l!==l+0)throw l;P(1,0)}}function $a(t,e,r,n,a){var i=O();try{A(t)(e,r,n,a)}catch(u){if(D(i),u!==u+0)throw u;P(1,0)}}function ba(t,e,r,n,a,i){var u=O();try{return A(t)(e,r,n,a,i)}catch(c){if(D(u),c!==c+0)throw c;P(1,0)}}function Ca(t,e,r,n,a,i,u,c){var l=O();try{return A(t)(e,r,n,a,i,u,c)}catch(f){if(D(l),f!==f+0)throw f;P(1,0)}}function _a(t,e,r,n){var a=O();try{return A(t)(e,r,n)}catch(i){if(D(a),i!==i+0)throw i;P(1,0)}}function Ta(t,e,r,n){var a=O();try{return A(t)(e,r,n)}catch(i){if(D(a),i!==i+0)throw i;P(1,0)}}function Pa(t){var e=O();try{return A(t)()}catch(r){if(D(e),r!==r+0)throw r;P(1,0)}}function Ea(t,e,r,n,a,i,u,c){var l=O();try{A(t)(e,r,n,a,i,u,c)}catch(f){if(D(l),f!==f+0)throw f;P(1,0)}}function Aa(t,e,r,n,a,i,u,c,l,f,p,y){var v=O();try{return A(t)(e,r,n,a,i,u,c,l,f,p,y)}catch(w){if(D(v),w!==w+0)throw w;P(1,0)}}function Oa(t,e,r,n,a,i,u,c,l,f,p,y,v,w,E,x){var _=O();try{A(t)(e,r,n,a,i,u,c,l,f,p,y,v,w,E,x)}catch(R){if(D(_),R!==R+0)throw R;P(1,0)}}function Da(t,e,r,n,a){var i=O();try{return Ue(t,e,r,n,a)}catch(u){if(D(i),u!==u+0)throw u;P(1,0)}}var jt;ht=function t(){jt||Ve(),jt||(ht=t)};function Ve(){if(rt>0||(cr(),rt>0))return;function t(){jt||(jt=!0,s.calledRun=!0,!bt&&(lr(),$(s),s.onRuntimeInitialized&&s.onRuntimeInitialized(),dr()))}s.setStatus?(s.setStatus("Running..."),setTimeout(function(){setTimeout(function(){s.setStatus("")},1),t()},1)):t()}if(s.preInit)for(typeof s.preInit=="function"&&(s.preInit=[s.preInit]);s.preInit.length>0;)s.preInit.pop()();return Ve(),h.ready}})();function Va(o){return oe(Wt,o)}function La(o){return Ha(Wt,o)}async function Ya(o,h){return Ba(Wt,o,h)}async function za(o,h){return Ua(Wt,o,h)}const Ke=[["aztec","Aztec"],["code_128","Code128"],["code_39","Code39"],["code_93","Code93"],["codabar","Codabar"],["databar","DataBar"],["databar_expanded","DataBarExpanded"],["data_matrix","DataMatrix"],["dx_film_edge","DXFilmEdge"],["ean_13","EAN-13"],["ean_8","EAN-8"],["itf","ITF"],["maxi_code","MaxiCode"],["micro_qr_code","MicroQRCode"],["pdf417","PDF417"],["qr_code","QRCode"],["rm_qr_code","rMQRCode"],["upc_a","UPC-A"],["upc_e","UPC-E"],["linear_codes","Linear-Codes"],["matrix_codes","Matrix-Codes"]],Na=[...Ke,["unknown"]].map(o=>o[0]),Rt=new Map(Ke);function Ga(o){for(const[h,s]of Rt)if(o===s)return h;return"unknown"}function Xa(o){if(tr(o))return{width:o.naturalWidth,height:o.naturalHeight};if(er(o))return{width:o.width.baseVal.value,height:o.height.baseVal.value};if(rr(o))return{width:o.videoWidth,height:o.videoHeight};if(ar(o))return{width:o.width,height:o.height};if(ir(o))return{width:o.displayWidth,height:o.displayHeight};if(nr(o))return{width:o.width,height:o.height};if(or(o))return{width:o.width,height:o.height};throw new TypeError("The provided value is not of type '(Blob or HTMLCanvasElement or HTMLImageElement or HTMLVideoElement or ImageBitmap or ImageData or OffscreenCanvas or SVGImageElement or VideoFrame)'.")}function tr(o){try{return o instanceof HTMLImageElement}catch{return!1}}function er(o){try{return o instanceof SVGImageElement}catch{return!1}}function rr(o){try{return o instanceof HTMLVideoElement}catch{return!1}}function nr(o){try{return o instanceof HTMLCanvasElement}catch{return!1}}function ar(o){try{return o instanceof ImageBitmap}catch{return!1}}function or(o){try{return o instanceof OffscreenCanvas}catch{return!1}}function ir(o){try{return o instanceof VideoFrame}catch{return!1}}function sr(o){try{return o instanceof Blob}catch{return!1}}function qa(o){try{return o instanceof ImageData}catch{return!1}}function Qa(o,h){try{const s=new OffscreenCanvas(o,h);if(s.getContext("2d")instanceof OffscreenCanvasRenderingContext2D)return s;throw void 0}catch{const s=document.createElement("canvas");return s.width=o,s.height=h,s}}async function ur(o){if(tr(o)&&!await to(o))throw new DOMException("Failed to load or decode HTMLImageElement.","InvalidStateError");if(er(o)&&!await eo(o))throw new DOMException("Failed to load or decode SVGImageElement.","InvalidStateError");if(ir(o)&&ro(o))throw new DOMException("VideoFrame is closed.","InvalidStateError");if(rr(o)&&(o.readyState===0||o.readyState===1))throw new DOMException("Invalid element or state.","InvalidStateError");if(ar(o)&&ao(o))throw new DOMException("The image source is detached.","InvalidStateError");const{width:h,height:s}=Xa(o);if(h===0||s===0)return null;const g=Qa(h,s).getContext("2d");g.drawImage(o,0,0);try{return g.getImageData(0,0,h,s)}catch{throw new DOMException("Source would taint origin.","SecurityError")}}async function Za(o){let h;try{if(globalThis.createImageBitmap)h=await createImageBitmap(o);else if(globalThis.Image){h=new Image;let $="";try{$=URL.createObjectURL(o),h.src=$,await h.decode()}finally{URL.revokeObjectURL($)}}else return o}catch{throw new DOMException("Failed to load or decode Blob.","InvalidStateError")}return await ur(h)}function Ja(o){const{width:h,height:s}=o;if(h===0||s===0)return null;const $=o.getContext("2d");try{return $.getImageData(0,0,h,s)}catch{throw new DOMException("Source would taint origin.","SecurityError")}}async function Ka(o){if(sr(o))return await Za(o);if(qa(o)){if(no(o))throw new DOMException("The image data has been detached.","InvalidStateError");return o}return nr(o)||or(o)?Ja(o):await ur(o)}async function to(o){try{return await o.decode(),!0}catch{return!1}}async function eo(o){var h;try{return await((h=o.decode)==null?void 0:h.call(o)),!0}catch{return!1}}function ro(o){return o.format===null}function no(o){return o.data.buffer.byteLength===0}function ao(o){return o.width===0&&o.height===0}function Qe(o,h){return o instanceof DOMException?new DOMException(`${h}: ${o.message}`,o.name):o instanceof Error?new o.constructor(`${h}: ${o.message}`):new Error(`${h}: ${o}`)}var lt;class oo extends EventTarget{constructor(s={}){var $;super();Ne(this,lt,void 0);try{const g=($=s==null?void 0:s.formats)==null?void 0:$.filter(b=>b!=="unknown");if((g==null?void 0:g.length)===0)throw new TypeError("Hint option provided, but is empty.");for(const b of g!=null?g:[])if(!Rt.has(b))throw new TypeError(`Failed to read the 'formats' property from 'BarcodeDetectorOptions': The provided value '${b}' is not a valid enum value of type BarcodeFormat.`);Ge(this,lt,g!=null?g:[]),Va().then(b=>{this.dispatchEvent(new CustomEvent("load",{detail:b}))}).catch(b=>{this.dispatchEvent(new CustomEvent("error",{detail:b}))})}catch(g){throw Qe(g,"Failed to construct 'BarcodeDetector'")}}static async getSupportedFormats(){return Na.filter(s=>s!=="unknown")}async detect(s){try{const $=await Ka(s);if($===null)return[];let g;try{sr($)?g=await Ya($,{tryHarder:!0,formats:ne(this,lt).map(b=>Rt.get(b))}):g=await za($,{tryHarder:!0,formats:ne(this,lt).map(b=>Rt.get(b))})}catch(b){throw console.error(b),new DOMException("Barcode detection service unavailable.","NotSupportedError")}return g.map(b=>{const{topLeft:{x:B,y:V},topRight:{x:Y,y:k},bottomLeft:{x:S,y:K},bottomRight:{x:z,y:q}}=b.position,tt=Math.min(B,Y,S,z),et=Math.min(V,k,K,q),bt=Math.max(B,Y,S,z),U=Math.max(V,k,K,q);return{boundingBox:new DOMRectReadOnly(tt,et,bt-tt,U-et),rawValue:b.text,format:Ga(b.format),cornerPoints:[{x:B,y:V},{x:Y,y:k},{x:z,y:q},{x:S,y:K}]}})}catch($){throw Qe($,"Failed to execute 'detect' on 'BarcodeDetector'")}}}lt=new WeakMap;exports.BarcodeDetector=oo;exports.setZXingModuleOverrides=La;
